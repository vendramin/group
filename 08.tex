\section{Lecture -- Week 8}

\subsection{Semi-direct products}

We first start with an exercise of \emph{direct products}. Let $G$ be a group and $H$ and $K$ be normal subgroups with trivial intersection, that is $H\cap K=\{1\}$. 
Then $hk=kh$ for all $h\in H$ and $k\in K$. In fact, 
\[
[h,k]=hkh^{-1}k^{-1}\in H\cap K=\{1\}, 
\]
since $hkh^{-1}\in K$ because $K$ is normal in $G$ and 
$kh^{-1}k^{-1}\in H$ because $H$ is normal in $G$. 

\begin{exercise}
\index{Direct product of groups}
\label{xca:direct_product}
Let $G$ be a group and $H$ and $K$ be normal subgroups of $G$.
If $G=HK$ and $H\cap K=\{1\}$, then $G\simeq H\times K$.
\end{exercise}

\begin{exercise}
\label{xca:direct_product:quotient}
Let $A$ be a normal subgroup of $H$, and $B$ be a normal subgroup of $K$. 
Prove that $A\times B$ is a normal subgroup of
$H\times K$ and 
\[
\frac{H\times K}{A\times B}\simeq(H/A)\times(K/B).
\]
\end{exercise}

\index{Exact factorization of groups}
We say that a group $G$ admits an exact factorization through 
the subgroups $H$ and $K$ if $G=HK$ and 
$H\cap K=\{1\}$. By Exercise \ref{xca:direct_product}, 
if $G$ admits an exact factorization through two normal subgroups, then 
it is isomorphic to the direct product of these subgroups. 

\begin{exercise}
\label{xca:uniqueness}
    Let $G$ be a group that admits an exact factorization through
    the subgroups $H$ and $K$. Prove that every $g\in G$ can be written 
    uniquely as $g=hk$ for some $h\in H$ and $k\in K$. 
\end{exercise}

\begin{example}
Let $G=\Sym_3$, $H=\langle (123)\rangle\unlhd G$ and $K=\langle (12)\rangle$. Since
$K$ is not normal in $G$, we cannot apply Exercise \ref{xca:direct_product}. 
We do have $G=HK$ and $H\cap K=\{\id\}$, but 
\[
H\times K\simeq\Z/3\times\Z/2\not\simeq\Sym_3,
\]
as $\Z/3\times\Z/2$ is abelian and $\Sym_3$ is not. 
\end{example}

In the next example, we present a group of \emph{affine transformations}. 

\begin{example}
\label{exa:affine}
\index{Group!of affine transformations}
    Let 
    \[ 
    G=\{f\colon\R\to\R, f(x)=ax+b\text{ for some $a,b\in\R$ with $a\ne 0$}\}.
    \]
    Then $G$ is a group with the usual composition of functions. The identity map is an element of $G$. 
    If $f\in G$, say $f(x)=ax+b$, then the inverse is an element of $G$, as 
    $f^{-1}(x)=(1/a)x-b/a$. Finally, compositions of functions of $G$ are elements of $G$: 
    if $f(x)=ax+b$ and $g(x)=cx+d$, then 
    \[
    f(g(x))=f(cx+d)=a(xc+d)+b=(ac)x+(ad+b).
    \]
    
    Note that $K=\{f\in G:f(x)=x+b\text{ for some $b\in\R$}\}$ is a normal subgroup 
    of $G$ isomorphic to the additive group $\R$. In fact, let $f(x)=x+b$ be an element of $K$ 
    and $g(x)=cx+d$ be an element of $G$. Then $gfg^{-1}\in K$, as 
    \begin{align*}
    (gfg^{-1})(x)&=g(f((1/c)x-d/c))\\
    &=g((1/c)x-d/c+b)\\
    &=c( (1/c)x-d/c+b)+d\\
    &=x+(bc).
    \end{align*}
    
    Finally, 
    $Q=\{f\in G:f(x)=ax\text{ for some $a\ne0$}\}$ is a subgroup of $G$ isomorphic to the multiplicative group $\R^{\times}$. 
    Then $G=KQ$ and $K\cap Q=\{\id\}$.
\end{example}

\begin{definition}
\index{Complement}
Let $G$ be a group, $K$ a normal subgroup of $G$, and $Q$ a subgroup of $G$. We say
that $Q$ \emph{complements} $K$ in $G$ if $K\cap Q=\{1\}$ and $G=KQ$.
\end{definition}

\begin{example}
Let $G=\Sym_3$ and $K=\langle (123)\rangle\unlhd G$. The subgroups
$\langle (12)\rangle$, $\langle
(13)\rangle$ and $\langle (23)\rangle$ complement $K$ in $G$.
\end{example}

The previous example shows that complements are not unique. However, 
complements are unique under isomorphism, as 
\[
G/K= KQ/K\simeq Q/K\cap Q=Q/\{1\}\simeq Q.
\]

We now present a generalization of the (internal) direct product of
Exercise~\ref{xca:direct_product}. 

\begin{definition}
\index{Semi-direct product}
We say that a group $G$ is a \emph{semi-direct product} of $Q$ and $K$ if $K$ 
is normal in $G$ and 
$K$ admits a complement in $G$ isomorphic to $Q$. Notation: $G=K\rtimes Q$.
\end{definition}

The symbol $\rtimes$ is not symmetric, but points to remind us which subgroup is normal. 

Let $G=K\rtimes Q$. Then $G=KQ$ with $K$ normal in $G$. 
Let $g=ax$ and $g_1=a_1x_1$ with $a,a_1\in K$ and $x,x_1\in Q$. 
Then 
\[
gg_1=(ax)(a_1x_1)=(axa_1x^{-1})(xx_1)\in KQ,
\]
because $K$ is normal in $G$. 

\begin{theorem}
Let $K$ be a normal subgroup of $G$. The following statements are equivalent:
\begin{enumerate}
\item $K$ admits a complement in $G$.
\item There exists a subgroup $Q$ of $G$ such that each $g\in G$ can be written uniquely 
as $g=xy$ for some 
$x\in K$ and $y\in Q$.
\item There is a group homomorphism $s\colon G/K\to G$ such that $\pi\circ s=\id_{G/K}$, where $\pi\colon G\to G/K
$, $g\mapsto Kg$, is the canonical homomorphism.
\item There exists a group homomorphism $\rho\colon G\to G$ such that $\ker\rho=K$ and the restriction $\rho|_{\rho(G)}$ equals the identity. 
\end{enumerate}
\end{theorem}

\begin{proof}
We first prove that $(1)\implies(2)$. If $Q$ complements $K$, then $G=KQ$ and
$K\cap Q=\{1\}$. In particular, if $g\in G$, then $g=xy$ for some $x\in K$ and $y\in Q$. To show that
the decomposition is unique, suppose that 
$g=x_1y_1$ with $x_1\in K$ and $y_1\in Q$. Then $x_1^{-1}x=yy_1^{-1}\in K\cap Q=\{1\}$ 
and hence $x=x_1$ and $y=y_1$.

%It is an exercise to show that $(2)\implies(1)$.

We now prove that $(2)\implies(3)$. Let $s\colon G/K\to G$, $s(Kg)=y$ if 
$g=xy$ with $x\in K$ and $y\in Q$. (Note that here we use right cosets, as it is more convenient.)
Let us check that $s$ is well-defined. 
For that purpose, we must show that $Kg=Kg_1$ implies $s(Kg)=s(Kg_1)$. Let $g=xy$ 
and $g_1=x_1y_1$ with $x,x_1\in K$ and $y,y_1\in Q$, then, since $Kg=Kg_1$, 
$xyy_1^{-1}x_1^{-1}=gg_1^{-1}\in K$, that is $yy_1^{-1}\in x^{-1}Kx_1=K$
 because $x,x_1\in K$. Hence $yy_1^{-1}\in K\cap Q=\{1\}$ and thus $y=y_1$. 
 
 We now show that $\pi\circ
 s=\id_{G/K}$:
\[
(\pi\circ s)(Kg)=\pi(y)=Ky=Kxy=Kg.
\]

Finally, the map 
$s$ is a group homomorphism, as 
\[
s((Kg)(Kg_1))=s(Kgg_1)=s(Kx(yx_1y^{-1})yy_1)=yy_1=s(Kg)s(Kg_1),
\]
since $yx_1y^{-1}\in K$. 


We now prove that $(3)\implies(4)$. Let $\rho=s\circ\pi$. Then $\rho$ is a group homomorphism (because it is the composition of homomorphisms). 
To prove that $\rho|_{\rho(G)}=\id$, we need to show that $\rho(\rho(g))=\rho(g)$ for all $g\in G$. 
We compute: 
\[
\rho(\rho(g))=(s\circ(\pi\circ s)\circ\pi)(g)=(s\circ\pi)(g)=\rho(g).
\]
We now compute $\ker\rho$. If $g\in\ker\rho$, then $s(\pi(g))=\rho(g)=1$. Thus 
\[
\pi(g)=\pi(s(\pi(g)))=\pi(1)=1_{G/K},
\]
that is $g\in\ker\pi=K$. Conversely, if $x\in K$, then
\[
\rho(x)=\rho(s(Kx))=\rho(s(K))=\rho(1)=1
\]
and hence $x\in\ker\rho$.

Finally, we prove that $(4)\implies(1)$. We claim that $Q=\rho(G)$ complements $K$ in
 $G$. We first show that $K\cap Q=\{1\}$: if $x\in K\cap Q$, then $x=\rho(g)$ for some $g\in G$. Moreover, 
\[
1=\rho(x)=\rho(\rho(g))=\rho(g).
\]
Hence $g\in\ker\rho=K$ and $x=1$. We now prove that $G=KQ$. For the inclusion $G\subseteq KQ$, 
\[
g=(g\rho(g^{-1}))\rho(g)
\]
and $g\rho(g^{-1})\in K=\ker\rho$, as $\rho(g\rho(g^{-1}))=  \rho(g)\rho(g^{-1})=1$.
\end{proof}

\begin{example}
$\Sym_n=\Alt_n\rtimes\langle(12)\rangle$, as $Q=\langle (12)\rangle\simeq\Z/2$ complements 
$\Alt_n$ in $\Sym_n$.
\end{example}

For a group $G$, 
the set 
\[
\Aut(G)=\{f\colon G\to G:f\text{ bijective group homomorphism}\}
\]
is a group with the composition of maps. It is called 
the \emph{automorphism group} of $G$. 
Examples of automorphism groups are the identity map and 
conjugations homomorphisms. 

\begin{example}
$\Aut(\Z)\simeq\Z/2$, as $\Aut(\Z)=\{\id,-\id\}$.
\end{example}

\begin{example}
Let $G$ be a group and $g\in G$. The conjugation 
map $\gamma_g\colon G\to G$, $x\mapsto gxg^{-1}$,
is an automorphism of $G$, as 
\[
\gamma_g(xy)=g(xy)g^{-1}=(gxg^{-1})(gyg^{-1})=\gamma_g(x)\gamma_g(y).
\]
Moreover, $\gamma\colon G\to\Aut(G)$, $g\mapsto\gamma_g$, is a group
homomorphism:
\[
\gamma_{gh}(x)=(gh)x(gh)^{-1}=g(\gamma_h(x))g^{-1}=\gamma_g(\gamma_h(x))=(\gamma_g\circ\gamma_h)(x).
\]

\index{Inner automorphisms}
The group of \emph{inner automorphisms} of $G$ is the 
group 
$\Inn(G)=\gamma(G)$. Note that $\ker\gamma=Z(G)$, as
if $g\in G$ is such that $\gamma_g=\id$, then 
\[
\gamma_g(x)=gxg^{-1}=x
\]
for all $x\in G$. By the first isomorphism theorem, 
\[
G/Z(G)\simeq \gamma(G)=\Inn(G).
\]
\end{example}

\begin{exercise}
\label{xca:aut(S3)}
    Prove that $\Aut(\Sym_3)\simeq\Sym_3$. 
\end{exercise}

\begin{exercise}
\label{xca:inner_is_normal}
    Let $G$ be a group. Prove that $\Inn(G)$ is a normal subgroup of $\Aut(G)$. 
\end{exercise} 

For a group $G$, the quotient $\Aut(G)/\Inn(G)$ is called 
the group of \emph{outer automorphisms} of $G$. 
Note that 
\[
\Inn(G)\text{ is cyclic}\Longleftrightarrow
|\Inn(G)|=1\Longleftrightarrow
G\text{ is abelian.}
\]

\begin{exercise}
\label{xca:aut_cyclic}
Let $G$ be a group. 
Prove that if $\Aut(G)$ is cyclic, then 
$G$ is abelian. 
\end{exercise}

\begin{exercise}
\label{xca:aut_finite}
    Prove that if $G$ is finite, then $\Aut(G)$ is finite.
\end{exercise}

% \begin{exercise}
% \label{xca:autgeq2}
%         Si $G$ es un grupo tal que $|G|\geq3$, entonces $|\Aut(G)|\geq2$.
% \end{exercise}


% \begin{exercise}
% \label{xca:aut_impar}
%         No existe un grupo finito cuyo grupo de automorfismos sea no trivial cíclico y de orden impar.
% \end{exercise}

% \begin{exercise}
% \label{xca:p2dividesAut}
%         Sea $p$ un número primo.
%         Si $G$ es un $p$-grupo no abeliano, entonces $p^2$ divide a $|\Aut(G)|$.
% \end{exercise}

% \begin{exercise}
%         \label{xca:Aut(H)}
%         Si $G=H\times K$, entonces $\Aut(H)$ es isomorfo a un subgrupo de $\Aut(G)$.
% \end{exercise}

% \begin{exercise}
% \label{xca:aut_trivial_center}
%         Si $G$ tiene centro trivial, entonces $\Aut(G)$ también.
% \end{exercise}

\index{Action!on groups}
\index{Action!by automorphisms}
Let us discuss how groups acts on groups. An action of a group on a group is 
a group homomorphism 
$\theta\colon Q\to\Aut(K)$, $x\mapsto\theta_x$. 
This is nothing but a way in which $Q$ permutes the elements of $K$ 
in a way that is compatible with both group structures. Typically, in this setting, 
one says that $Q$ acts on $K$ by automorphisms. 

What does it mean that $\theta$ is a group homomorphism? 
For $x\in Q$, write $\theta_x\colon K\to K$, $a\mapsto x\cdot a$. 
Then $\theta$ is a well-defined group homomorphism if and only if 
the following properties hold: 
\begin{enumerate}
    \item $1\cdot a=a$ for all $a\in K$. 
    \item $x\cdot (y\cdot a)=(xy)\cdot a$ for all $x,y\in Q$ and $a\in K$.
    \item $x\cdot 1=1$ for all $x\in Q$. 
    \item $x\cdot (ab)=(x\cdot a)(x\cdot b)$ for all $x\in Q$ and $a,b\in K$. 
\end{enumerate}

\begin{example}
\label{xca:GL2onR2}
    The group $\GL_2(\R)$ acts 
    on the additive group $\R^{2\times1}$ 
    by automorphisms via the formula 
    \begin{equation}
    \label{eq:action}
    \begin{pmatrix}
        a&b\\
        c&d
        \end{pmatrix}\cdot\colvec{2}{x}{y}=\colvec{2}{ax+by}{cx+dy}.
    \end{equation}
    
    Before doing calculations, note that 
    this formula 
    is nothing but the usual 
    left multiplication of matrices 
    by vectors! In fact
    $\alpha\in\GL_2(\R)$ and $v\in\R^{2\times1}$, 
    the action of \eqref{eq:action} is 
    just 
    \[
    \alpha\cdot v=\alpha v.
    \]
    
    To show that we have an action by automorphisms, there are four properties to verify. 
    First, it is trivial to check the first property, as 
    \[
    \begin{pmatrix}1&0\\0&1\end{pmatrix}\colvec{2}{x}{y}=\colvec{2}{x}{y}.
    \]
    For the second property, a direct calculation shows that 
    \[
    \alpha\cdot (\beta\cdot v)=(\alpha\beta)\cdot v
    \]
    for all $\alpha,\beta\in\GL_2(\R)$ and $v\in\R^{2\times1}$. 
    The third property is trivial:
    \[
    \begin{pmatrix}
        a&b\\
        c&d
    \end{pmatrix}\colvec{2}{0}{0}=\colvec{2}{0}{0}.
    \]
    Finally, the fourth property is just the left distributivity:
    \[
    \alpha\cdot (v+w)=x(v+w)=\alpha v+\alpha w=\alpha\cdot v+\alpha\cdot w
    \]
    for all $\alpha\in\GL_2(\R)$ and $v,w\in\R^{2\times1}$. 
\end{example}

%The following exercise constructs semi-direct products. 

\begin{exercise}
\label{xca:semi-direct}
Let $K$ and $Q$ be groups and $\theta\colon Q\to\Aut(K)$, $x\mapsto\theta_x$, a group
homomorphism. Prove that $K\times Q$ 
with 
\[
(a,x)(b,y)=(a\theta_x(b),xy)
\]
is a group. This group will be written as $K\rtimes_\theta Q$.
\end{exercise}

% \begin{proof}[Bosquejo de la demostración]
% Dejamos como ejercicio verificar que la operación es asociativa. Hay que verificar además que el elem
% ento neutro de $K\rtimes_\theta Q$ será $(1,1)$ y
% que el inverso de $(a,x)\in K\rtimes_\theta Q$ será $(\theta_{x^-1}(a^{-1}),x^{-1})$.
% \end{proof}

The group of Exercise \ref{xca:semi-direct} is the
semi-direct product of the subgroups 
\begin{align*}
K\times\{1\}=\{(a,1):a\in K\}\simeq K,&&
\{1\}\times Q=\{(1,x):x\in Q\}\simeq Q
\end{align*}
of $K\rtimes_\theta Q$. Note that $K\times\{1\}$ is normal in $K\rtimes_\theta Q$. 
We can identity $K\rtimes\{1\}$ with $K$ 
and $\{1\}\rtimes Q$ with $Q$. This means 
that for $a\in K$ and $x\in Q$, 
instead of writing $(a,1)$ one simply writes $a$ and 
$(1,x)$ is replaced by $x$. Moreover,  
\begin{gather*}
ax=(a,1)(1,x)=(a,x)
\shortintertext{and}
xa=(1,x)(a,1)=(\theta_x(a),x)=(\theta_x(a),1)(1,x)=\theta_x(a)x.
\end{gather*}
Thus we can write 
\[
\theta_x(a)=xax^{-1}
\]
for all $x\in Q$ and $a\in K$, that is 
\[
\theta_x(a)=(\theta_x(a),1)=(1,x)(a,1)(1,x)^{-1}=xax^{-1}.
\]

\begin{exercise}
Prove that if $G$ is a semi-direct product of the normal subgroup 
$K$ with the subgroup $Q$, there exists a group homomorphism
$\theta\colon Q\to\Aut(K)$
such that $G\simeq K\rtimes_\theta Q$.
\end{exercise}

% \begin{proof}[Bosquejo de la demostración]
% Para $x\in Q$ sea $\theta_x\colon K\to K$, $\theta_x(a)=xax^{-1}$. Ya vimos que $\theta_x\in\Aut(K)$
% y que $Q\to\Aut(K)$, $x\mapsto\theta_x$ es un morfismo de grupos. Queda verificar que
% la función $K\rtimes_\theta Q\to G$, $(a,x)\mapsto ax$, es un morfismo biyectivo de grupos.
% \end{proof}

Let us discuss some examples. 

\begin{example}
    The multiplicative group $Q=\R^{\times}$ acts on the 
    additive group $K=\R$ by multiplication: If $x\in Q$ and $a\in K$, 
    then $x\cdot a=xa$. This is an action by automorphisms,~as 
    \[
        1\cdot a=a,\quad 
        x\cdot (y\cdot a)=x(ya)=(xy)a=(xy)\cdot a,\quad 
        x\cdot 0=0,\quad 
        x\cdot (a+b)=xa+xb
    \]
    for all $a,b\in\R$ and $x,y\in\R^{\times}$. 
    
    Hence one can construct the semi-direct product $K\rtimes Q$. The operation of 
    this group is 
    \[ 
        (d,c)(b,a)=(cb+d,ca). 
    \]
    This group is isomorphic to the group of affine transformations of
    Example~\ref{exa:affine}. In fact, one can easily show that 
    \[ 
        K\rtimes Q\to \{f\colon\R\to\R:f(x)=ax+b\text{ for some $a\in\R^{\times}$ and $b\in\R$}\},
        \quad 
        (b,a)\mapsto f(x)=ax+b,
    \]
    is a bijective group homomorphism. 
\end{example}



\begin{example}
Let $N\simeq \Z/n$ and $H\simeq\Z/2=\{0,1\}$. The map $\theta\colon H\to\Aut(N)$, 
$1\mapsto (x\mapsto x^{-1})$, is a group homomorphism. Let $G=N\rtimes_\theta H$.
Then $G\simeq\D_n$, the dihedral group of order $2n$.

Recall that 
\[
\D_n=\langle r,s:r^n=s^2=1, srs^{-1}=r^{-1}\rangle.
\]
Assume that $N=\langle x\rangle$ and $H=\langle y\rangle$. Then $|(x,1)|=n$ and $|(1,y)|=2$. 
Moreover,
\begin{align*}
(1,y)(x,1)(1,y)^{-1} &= (\theta_y(x),y)(1,y)\\
&=(\theta_y(x),y^2)\\
&=(\theta_y(x),1)\\
&=(x^{-1},1)\\
&=(x,1)^{-1}.
\end{align*}
If $u=(x,1)$ and $v=(1,y)$, then $u^n=v^2=(1,1)$ and $vuv^{-1}=u^{-1}$. Thus there exists 
a surjective group homomorphism 
$\D_n\to G$ (because $G$ is generated by $u$ and $v$). Moreover, $|G|=|N||H|=2n$. Hence 
$G$ has order $2n$ and therefore $G\simeq\D_n$.
\end{example}

\begin{example}
Let $K=\{\id,(12)(34),(13)(24),(14)(23)\}$. Then $K$ is normal in $\Alt_4$. 
Let $H=\langle (123)\rangle\simeq\Z/3$. Since $K\cap H$ is a subgroup of $H$ and $K$ and, moreover, 
$K$ and $H$ have coprime orders, $H\cap K=\{\id\}$. Hence $\Alt_4=K\rtimes H$.
\end{example}

\begin{example}
Let 
\[
K=\{\id,(12)(34),(13)(24),(14)(23)\},\quad  
H=\{\sigma\in\Sym_4:\sigma(4)=4\}.
\]
Note that $H$ is a subgroup of 
$\Sym_4$ isomorphic to $\Sym_3$. Then $H\cap K=\{\id\}$ and hence 
$\Sym_4=K\rtimes H$.
\end{example}

Let $n\geq5$. 
Using the fact that $\Alt_n$ is a simple group,  
one proves that $\Alt_n$ cannot be written as a semi-direct product of proper subgroups. 

\begin{example}
Let $K=\Z/3$ and $Q=\Z/4$. Since $\Hom(Q,\Aut(K))=\{1,\tau\}$, where 
\[
\tau\colon\Z/4\to\Aut(\Z/3)=\{\id,\rho\}\simeq\Z/2,\quad 1\mapsto\rho,
\]
the semi-direct product $T=K\rtimes_\tau Q$ is a non-abelian group of order 12. Moreover,
$T\not\simeq\Alt
_4$ as $|(2,2)|=6$ and $\Alt_4$ has no elements of order six.
\end{example}


\begin{exercise}
    \label{xca:affine_semidirect}
    Prove that the group of Exercise~\ref{xca:affine} is a semi-direct product. 
\end{exercise}
